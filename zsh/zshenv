# vim: ft=zsh sw=4 fdm=marker path+=~/bin,~/src/unistra/bin

DEBIAN_PREVENT_KEYBOARD_CHANGES= # fuck you, debian!
skip_global_compinit= # also:  fuck you, debian!
export TEXMFHOME=~/local/texmf
export EMAIL=khatar@phear.org # used by some tools (debian devscripts, mutt, ...)
export EDITOR=vim
export PAGER=less
export LC_ALL=
export LANGUAGE=
# export LC_ALL=en_US.utf8 # locale -a to list available 
export ZSHDOT=~/local/etc/zsh
export DOKUWIKI_CLIENT_BASE=https://di.u-strasbg.fr/
export DOKUWIKI_CLIENT_MACHINE=unistra

export VIM_SCRATCHPAD_ROOT=~/local/var/scratchpad

setopt pathdirs 
path=( ~/bin ~/node_modules/*/bin(N) $path )
. uze/uze
. uze/eiro/env/more
. uze/eiro/env/homebrew
. uze/unistra/annuaire

# ~u for UNISTRA.  TODO: split, document, push ... 
hash -d u=~/bin/u
. ~u/helpers 

export RT_WORKSPACE=~/todo/bt
. uze/rt

hash -d p5=~/src/perl/5/lib 
. uze/p5/env 
p5/env/local
p5/env/dev

glob_zshenv_files="$ZSHDOT/env/*.zsh(N)"
glob_zshrc_files="$ZSHDOT/rc/*.zsh(N)"

for f ( $~glob_zshenv_files ) source $f

. uze/whence
alias b=whence/readlink

mailsync () {
    cd ~/local/mail && yes |
        shush2 mbsync -qa
}

mailpath+=( '/var/spool/mail/mc?new local mail' ) 
function () {
    local f
    for f { mailpath+=( "$f?new $f:t mail" ) }
}   ~/local/mail/*(N/)

5 () { perl -E "$@" }

# add to prompt
has_cabal_sandbox () {
    local f
    for f ( .cabal*(N) ) {
        [[ -f .cabal.sandbox.config ]] &&
            print '(Cabal - sandbox)' ||
            print '(Cabal)'
        last
    }
}

. uze/muML
alias M=muML/T_/to

export -UT M4PATH m4path
m4path=( ~/src/m4/*/lib $m4path )

# if $VIM_EXTRA_PATH set in vim, make them available from the shell
export -UT VIM_EXTRA_PATH vim_extra_path
path=( $vim_extra_path $path ) 

. uze/eiro/blog
alias bloge=eiro/blog/entry

alias z=zsh
